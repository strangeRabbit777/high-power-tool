var kutty=kutty||function(){"use strict";var t=["get","post","put","delete","patch"];function h(t){if(t==="null"||t==="false"||t===""){return null}else if(t.lastIndexOf("ms")===t.length-2){return parseFloat(t.substr(0,t.length-2))}else if(t.lastIndexOf("s")===t.length-1){return parseFloat(t.substr(0,t.length-1))*1e3}else{return parseFloat(t)}}function u(t,e){return t.getAttribute&&t.getAttribute(e)}function p(t,e){return u(t,e)||u(t,"data-"+e)}function o(t){return t.parentElement}function a(){return document}function s(t,e){if(e(t)){return t}else if(o(t)){return s(o(t),e)}else{return null}}function g(t,e){var r=null;s(t,function(t){return r=u(t,e)});return r}function l(t,e){return t!=null&&(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function f(t,e){do{if(t==null||l(t,e))return t}while(t=t&&o(t))}function c(t){var e=new DOMParser;var r=e.parseFromString(t,"text/html");return r.body}function e(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function v(t){return e(t,"Function")}function d(t){return e(t,"Object")}function y(t){var e="kutty-internal-data";var r=t[e];if(!r){r=t[e]={}}return r}function m(t,e){if(t){for(var r=0;r<t.length;r++){e(t[r])}}}function r(t){var e=t.getBoundingClientRect();var r=e.top;var n=e.bottom;return r<window.innerHeight&&n>=0}function k(t){return a().body.contains(t)}function S(t,e){return t.concat(e)}function b(t){var e=s(t,function(t){return u(t,"kt-target")!==null});if(e){var r=u(e,"kt-target");if(r==="this"){return e}else{return a().querySelector(r)}}else{var n=y(t);if(n.boosted){return a().body}else{return t}}}function w(e,r){m(e.attributes,function(t){if(!r.hasAttribute(t.name)){e.removeAttribute(t.name)}});m(r.attributes,function(t){e.setAttribute(t.name,t.value)})}function E(t){var n=[];m(t.children,function(t){if(p(t,"kt-swap-oob")==="true"){var e=a().getElementById(t.id);if(e){var r=a().createDocumentFragment();r.appendChild(t);n=n.concat(O(e,r))}else{t.parentNode.removeChild(t);Y(a().body,"oobErrorNoTarget.kutty",{id:t.id,content:t})}}});return n}function T(n,t){var i=[];m(t.querySelectorAll("[id]"),function(t){var e=n.querySelector(t.tagName+"[id="+t.id+"]");if(e){var r=t.cloneNode();w(t,e);i.push(function(){w(t,r)})}});return i}function i(t,e,r){var n=T(t,r);while(r.childNodes.length>0){var i=r.firstChild;t.insertBefore(i,e);if(i.nodeType!==Node.TEXT_NODE){Y(i,"load.kutty",{elt:i,parent:o(i)});G(i)}}return n}function O(t,e){if(t.tagName==="BODY"){return q(t,e)}else{var r=i(o(t),t,e);o(t).removeChild(t);return r}}function L(t,e){return i(t,t.firstChild,e)}function C(t,e){return i(o(t),t,e)}function x(t,e){return i(t,null,e)}function A(t,e){return i(o(t),t.nextSibling,e)}function q(t,e){var r=t.firstChild;var n=i(t,r,e);if(r){while(r.nextSibling){t.removeChild(r.nextSibling)}t.removeChild(r)}return n}function N(t,e){var r=g(t,"kt-select");if(r){var n=a().createDocumentFragment();m(e.querySelectorAll(r),function(t){n.appendChild(t)});e=n}return e}function M(t,e,r){var n=c(r);if(n){var i=E(n);n=N(e,n);var o=g(e,"kt-swap");switch(o){case"outerHTML":return S(i,O(t,n));case"prepend":return S(i,L(t,n));case"prependBefore":return S(i,C(t,n));case"append":return S(i,x(t,n));case"appendAfter":return S(i,A(t,n));default:return S(i,q(t,n))}}}function I(t,e){if(e){if(e.indexOf("{")===0){var r=JSON.parse(e);for(var n in r){if(r.hasOwnProperty(n)){var i=r[n];if(!d(i)){i={value:i}}Y(t,n,i)}}}else{Y(t,e,[])}}}function R(t){var e=g(t,"kt-trigger");if(e){return e}else{if(l(t,"button")){return"click"}else if(l(t,"form")){return"submit"}else if(l(t,"input, textarea, select")){return"change"}else{return"click"}}}function F(o,t,a){var e=t.split(",");m(e,function(t){var e="";var r=50;var n=t.trim();if(n.indexOf(":")>0){var i=n.split(":");e=i[0];r=h(i[1])}else{e=n}setTimeout(function(){o.classList[a].call(o.classList,e)},r)})}function H(t,e,r){var n=R(t);var i=y(t);if(n.trim().indexOf("every ")===0){var o=n.split(/\s+/);var a=o[1];if(a){var u=h(a);i.timeout=setTimeout(function(){if(k(t)){gt(t,e,r);H(t,e,p(t,"kt-"+e))}},u)}}}function D(t){return location.hostname===t.hostname&&u(t,"href")&&!u(t,"href").startsWith("#")}function P(t,e,r){if(t.tagName==="A"&&D(t)||t.tagName==="FORM"){e.boosted=true;var n,i;if(t.tagName==="A"){n="get";i=u(t,"href")}else{var o=u(t,"method");n=o?o.toLowerCase():"get";i=u(t,"action")}X(t,n,i,e,r,true)}}function X(o,a,u,t,e,s){var r=function(t){if(s)t.preventDefault();var e=y(t);var r=y(o);if(!e.handled){e.handled=true;if(p(o,"kt-trigger-once")==="true"){if(r.triggeredOnce){return}else{r.triggeredOnce=true}}if(p(o,"kt-trigger-changed-only")==="true"){if(r.lastValue===o.value){return}else{r.lastValue=o.value}}if(r.delayed){clearTimeout(r.delayed)}var n=p(o,"kt-trigger-delay");var i=function(){gt(o,a,u,t.target)};if(n){r.delayed=setTimeout(i,h(n))}else{i()}}};t.trigger=e;t.eventListener=r;o.addEventListener(e,r)}function U(){if(!window["kuttyScrollHandler"]){var t=function(){m(a().querySelectorAll("[kt-trigger='reveal']"),function(t){j(t)})};window["kuttyScrollHandler"]=t;window.addEventListener("scroll",t)}}function j(t){var e=y(t);if(!e.revealed&&r(t)){e.revealed=true;gt(t,e.verb,e.path)}}function B(t){if(!k(t)){t.sseSource.close();return true}}function J(e,t){var r={initializer:function(){new EventSource(t,r.config)},config:{withCredentials:true}};Y(e,"initSSE.kutty",{config:r});var n=r.initializer();n.onerror=function(t){Y(e,"sseError.kutty",{error:t,source:n});B(e)};y(e).sseSource=n}function z(t,e,r,n){var i=s(e,function(t){return t.sseSource});if(i){var o=function(){if(!B(i)){if(k(e)){gt(e,r,n)}else{i.sseSource.removeEventListener(t,o)}}};i.sseSource.addEventListener(t,o)}else{Y(e,"noSSESourceError.kutty")}}function K(t,e,r,n){if(!t.loaded){t.loaded=true;gt(e,r,n)}}function V(r,n,i){var o=false;m(t,function(t){var e=p(r,"kt-"+t);if(e){o=true;n.path=e;n.verb=t;if(i.indexOf("sse:")===0){z(i.substr(4),r,t,e)}else if(i==="revealed"){U();j(r)}else if(i==="load"){K(n,r,t,e)}else if(i.trim().indexOf("every ")===0){n.polling=true;H(r,t,e)}else{X(r,t,e,n,i)}}});return o}function G(t){var e=y(t);if(!e.processed){e.processed=true;var r=R(t);var n=V(t,e,r);if(!n&&g(t,"kt-boost")==="true"){P(t,e,r)}var i=p(t,"kt-sse-source");if(i){J(t,i)}var o=p(t,"kt-add-class");if(o){F(t,o,"add")}var a=p(t,"kt-remove-class");if(a){F(t,a,"remove")}}if(t.children){m(t.children,function(t){G(t)})}}function _(t,e,r){var n=g(t,"kt-error-url");if(n){var i=new XMLHttpRequest;i.open("POST",n);i.setRequestHeader("Content-Type","application/json;charset=UTF-8");i.send(JSON.stringify({elt:t.id,event:e,details:r}))}}function W(t,e){var r;if(window.CustomEvent&&typeof window.CustomEvent==="function"){r=new CustomEvent(t,{detail:e})}else{r=a().createEvent("CustomEvent");r.initCustomEvent(t,true,true,e)}return r}function Y(t,e,r){r["elt"]=t;var n=W(e,r);if(kutty.logger){kutty.logger(t,e,r);if(e.indexOf("Error")>0){_(t,e,r)}}var i=t.dispatchEvent(n);var o=t.dispatchEvent(W("all.kutty",{elt:t,originalDetails:r,originalEvent:n}));return i&&o}function n(t,e,r){var n,i,o;if(v(t)){n=a().body;i="all.kutty";o=t}else if(v(e)){n=a().body;i=t;o=e}else{n=t;i=e;o=r}return n.addEventListener(i,o)}function Q(){var t=a().querySelector(".kt-history-element");return t||a().body}function Z(t,r){t=t.sort(function(t,e){return r[e]-r[t]});var e=0;m(t,function(t){e++;if(e>20){delete r[t];localStorage.removeItem(t)}})}function $(t){var e=JSON.parse(localStorage.getItem("kt-history-timestamps"))||{};e[t]=Date.now();var r=Object.keys(e);if(r.length>20){Z(r,e)}localStorage.setItem("kt-history-timestamps",JSON.stringify(e))}function tt(){var t=Q();var e=location.pathname+location.search;Y(a().body,"historyUpdate.kutty",{path:e,historyElement:t});history.replaceState({},a().title,window.location.href);localStorage.setItem("kt-history:"+e,t.innerHTML);$(e)}function et(t){history.pushState({},"",t)}function rt(t){m(t,function(t){t.call()})}function nt(e){Y(a().body,"historyCacheMiss.kutty",{path:e});var t=new XMLHttpRequest;t.open("GET",e,true);t.onload=function(){Y(a().body,"historyCacheMissLoad.kutty",{path:e});if(this.status>=200&&this.status<400){var t=c(this.response);t=t.querySelector(".kt-history-element")||t;rt(q(Q(),t))}}}function it(){var t=location.pathname+location.search;Y(a().body,"historyRestore.kutty",{path:t});var e=localStorage.getItem("kt-history:"+t);if(e){$(t);rt(q(Q(),c(e)))}else{nt(t)}}function ot(t){return g(t,"kt-push-url")==="true"||t.tagName==="A"&&y(t).boosted}function at(t){st(t,"add")}function ut(t){st(t,"remove")}function st(t,e){var r=g(t,"kt-indicator");if(r){var n=a().querySelectorAll(r)}else{n=[t]}m(n,function(t){t.classList[e].call(t.classList,"kutty-show-indicator")})}function lt(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(n.isSameNode(e)){return true}}return false}function ft(e,r,t){if(t==null||lt(e,t)){return}else{e.push(t)}var n=u(t,"name");var i=t.value;if(n&&i){var o=r[n];if(o){if(Array.isArray(o)){o.push(i)}else{r[n]=[o,i]}}else{r[n]=i}}if(l(t,"form")){var a=t.elements;m(a,function(t){ft(e,r,t)})}}function ct(t){var e=[];var r={};ft(e,r,t);var n=p(t,"kt-include");if(n){var i=a().querySelectorAll(n);m(i,function(t){ft(e,r,t)})}ft(e,r,f(t,"form"));return r}function vt(t,e,r){if(t!==""){t+="&"}t+=encodeURIComponent(e)+"="+encodeURIComponent(r);return t}function dt(t){var e="";for(var r in t){if(t.hasOwnProperty(r)){var n=t[r];if(Array.isArray(n)){m(n,function(t){e=vt(e,r,t)})}else{e=vt(e,r,n)}}}return e}function ht(t,e,r,n){t.setRequestHeader((n?"":"X-KT-")+e,r||"")}function pt(t,e,r,n,i){ht(t,"Request","true");ht(t,"Trigger-Id",u(e,"id"));ht(t,"Trigger-Name",u(e,"name"));ht(t,"Target-Id",u(r,"id"));ht(t,"Current-URL",a().location.href);if(n){ht(t,"Prompt",n)}if(i){ht(t,"Event-Target",u(i,"id"))}if(a().activeElement){ht(t,"Active-Element",u(a().activeElement,"id"));if(a().activeElement.value){ht(t,"Active-Element-Value",a().activeElement.value)}}}function gt(a,t,e,r){var n=y(a);if(n.requestInFlight){return}else{n.requestInFlight=true}var u=function(){n.requestInFlight=false};var s=b(a);var i=g(a,"kt-prompt");if(i){var o=o(i);if(!Y(a,"prompt.kutty",{prompt:o,target:s}))return u()}var l=g(a,"kt-confirm");if(l){if(!confirm(l))return u()}var f=new XMLHttpRequest;var c=ct(a);if(!Y(a,"values.kutty",{values:c,target:s}))return u();var v;if(t==="get"){var d=Object.keys(c).length===0;v=e+(d?"":"?"+dt(c));f.open("GET",v,true)}else{v=e;f.open("POST",v,true);ht(f,"Content-Type","application/x-www-form-urlencoded; charset=UTF-8",true);if(t!=="post"){ht(f,"X-HTTP-Method-Override",t.toUpperCase(),true)}}f.overrideMimeType("text/html");pt(f,a,s,o,r);f.onload=function(){try{if(!Y(a,"beforeOnLoad.kutty",{xhr:f,target:s}))return;I(a,this.getResponseHeader("X-KT-Trigger"));var n=this.getResponseHeader("X-KT-Push");var i=ot(a)||n;if(this.status>=200&&this.status<400){if(this.status!==204){var o=this.response;if(!Y(a,"beforeSwap.kutty",{xhr:f,target:s}))return;if(i){tt()}s.classList.add("kutty-swapping");var t=function(){try{var t=M(s,a,o);s.classList.remove("kutty-swapping");s.classList.add("kutty-settling");Y(a,"afterSwap.kutty",{xhr:f,target:s});var e=function(){m(t,function(t){t.call()});s.classList.remove("kutty-settling");if(i){et(n||v);tt()}Y(a,"afterSettle.kutty",{xhr:f,target:s})};var r=p(a,"kt-settle-delay")||"100ms";if(r){setTimeout(e,h(r))}else{e()}}catch(t){Y(a,"swapError.kutty",{xhr:f,response:f.response,status:f.status,target:s});throw t}};var e=p(a,"kt-swap-delay");if(e){setTimeout(t,h(e))}else{t()}}}else{Y(a,"responseError.kutty",{xhr:f,response:f.response,status:f.status,target:s})}}catch(t){Y(a,"onLoadError.kutty",{xhr:f,response:f.response,status:f.status,target:s});throw t}finally{ut(a);u();Y(a,"afterOnLoad.kutty",{xhr:f,response:f.response,status:f.status,target:s})}};f.onerror=function(){ut(a);Y(a,"sendError.kutty",{xhr:f});u()};if(!Y(a,"beforeRequest.kutty",{xhr:f,values:c,target:s}))return u();at(a);f.send(t==="get"?null:dt(c))}function yt(t){if(a().readyState!=="loading"){t()}else{a().addEventListener("DOMContentLoaded",t)}}yt(function(){G(a().body);Y(elt,"load.kutty",{elt:a().body});window.onpopstate=function(){it()}});function mt(t){return eval(t)}function kt(e){kutty.on("load.kutty",function(t){e(t.details.elt)})}return{processElement:G,on:n,onLoad:kt,version:"0.0.1",_:mt}}();